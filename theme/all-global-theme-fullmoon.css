/*---------------------------- Dark Mode Global Variables -----------------------------
- Global variables used for ease of modification, and future customization
 
[Index] ctrl+f a line to find the specified section:
Establishing custom variables
Overwriting existing variables
Applying variables to create the Dark Mode theme
Adapting to add-on-theme styling
Global styling - applies everywhere
-------------------------------------------------------------------------------------*/


@media (prefers-color-scheme: dark) {

/* Establishing custom variables - allowing most(/all) customization to be done in one place. */
    
:root, body, * {
  color-scheme: dark !important; /*--<--dont touch--*/
  --uc-ultima-window: rgb(43, 42, 51);
  --uc-dark: #000;
  --uc-light: #fff;
  --uc-light-dark: #fff;
  --uc-dark-light: #000000;
  --uc-ultima-accent-i: #EDF783;
  --uc-ultima-accent-ii: #17347B;
  --uc-ultima-accent-iii: rgb(255, 255, 255);
  --uc-ultima-accent-iv: rgba(28, 27, 34, 0.5);
  --uc-ultima-background-i: rgba(28, 27, 34, 0.5);
  --uc-ultima-background-ii: rgba(28, 27, 34, 0.86);
  --uc-ultima-background-iii: rgba(28, 27, 34, 0.96);
  --uc-ultima-background-iv: rgb(35, 35, 42);
  --uc-transparent: rgba(0,0,0,0);
  --uc-selected: rgba(0,0,0,0.65);
  --uc-active: rgba(0,0,0,0.75);
  --uc-text: rgb(255, 255, 255);
  --uc-panel-border: rgba(25, 25, 25, 1);
  --uc-panel-border-ii: rgba(45, 45, 45, 0.5);
  --uc-context-menu: rgba(28, 27, 34,1);
  --uc-tabs-background: var(--uc-ultima-background-i);
  --uc-sb-themed: var(--uc-ultima-background-i);
  --uc-sb-themed-ii: var(--uc-ultima-accent-iv);
  --uc-sb-background: var(--uc-transparent);
  --uc-tabs-lwt: color-mix(in srgb, var(--lwt-accent-color) 75%, #000);
  --uc-sb-lwt: color-mix(in srgb, var(--lwt-accent-color) 75%, #000);
  --uc-panel-background: var(--uc-ultima-background-iii);
  --urlbar-icon-border-radius: var(--uc-all-border-radius);
  --arrowpanel-menuitem-border-radius: var(--uc-all-border-radius);
  --arrowpanel-border-radius: var(--uc-all-border-radius);
  --toolbarbutton-border-radius: var(--uc-all-border-radius);
  --urlbar-icon-border-radius: var(--uc-all-border-radius);
  --button-border-radius: 10px;
  --uc-button-border-radius: 10px;
}

/* Overwriting existing variables -------------------------------------------------*/
  
#main-window:not([lwtheme]), :root:not([lwtheme]) {    
    
  --toolbar-bgcolor: var(--uc-ultima-window) !important;
    
  --tab-selected-bgcolor: var(--uc-active) !important;
  --tab-selected-textcolor: var(--uc-text) !important;
  --tab-loading-fill: var(--uc-ultima-accent-i) !important;

  --button-hover-bgcolor: var(--uc-selected) !important;
  --toolbarbutton-hover-background: var(--uc-selected) !important;
  --button-active-bgcolor: var(--uc-active) !important;
  --toolbarbutton-active-background: var(--uc-active) !important;
  --button-primary-bgcolor: var(--uc-ultima-accent-i) !important;
  --button-primary-hover-bgcolor: var(--uc-ultima-accent-i) !important;
  --buttons-destructive-hover-bgcolor: #9d1c1c;  /*red*/
  --buttons-destructive-active-bgcolor: #7d2828; /*red*/
  --toolbarbutton-icon-fill: var(--uc-text) !important; /*toolbar button color*/

  --toolbar-field-background-color: var(--uc-ultima-accent-iv) !important;
  --toolbar-field-border-color: var(--uc-ultima-accent-iii) !important;
  --toolbar-field-focus-border-color: var(--uc-ultima-accent-iii) !important;
  --urlbarView-result-button-selected-color: var(--uc-text) !important;
  --urlbarView-result-button-selected-background-color: var(--uc-selected) !important;
  --urlbarView-highlight-background: var(--uc-selected) !important;
  --urlbarView-hover-background: var(--uc-selected) !important;
  --urlbar-box-hover-bgcolor: var(--uc-selected) !important;
  --urlbar-box-hover-text-color: var(--uc-text) !important;

  --toolbar-field-color: var(--uc-text) !important;
  --toolbar-field-focus-color: var(--uc-text) !important;
  --toolbar-color: var(--uc-text) !important;
  --toolbar-field-color: var(--uc-text) !important;
  --toolbar-field-focus-color: var(--uc-text) !important;

  --sidebar-text-color: var(--uc-text) !important;
  --arrowpanel-background: var(--uc-panel-background) !important;
  --arrowpanel-border-color: var(--uc-active) !important;
  --arrowpanel-color: var(--uc-text) !important;
  --newtab-background-color: var(--uc-tabs-background) !important;

  --panel-background: var(--uc-panel-background) !important;
  --panel-item-hover-bgcolor: var(--uc-selected) !important;
  --panel-banner-item-hover-bgcolor: var(--uc-selected) !important;
  --short-notification-background: var(--uc-ultima-accent-ii) !important;
  --panel-border-color: var(--uc-panel-border) !important;
  --organizer-toolbar-background: var(--uc-ultima-accent-iv) !important;
  --organizer-pane-background: var(--uc-ultima-accent-iv) !important;
  --organizer-content-background: var(--uc-ultima-accent-iv) !important;
  --organizer-hover-background: var(--uc-ultima-accent-iv) !important;
  --organizer-selected-background: var(--uc-selected) !important;
  --organizer-focus-selected-color: var(--uc-selected) !important;
  --organizer-outline-color: rgb(0,221,255) !important;
  --organizer-toolbar-field-background: var(--uc-ultima-accent-iv) !important;
  --organizer-toolbar-field-background-focused: rgb(66, 61, 98) !important;
  --content-select-background-image: none !important;
} 
    
    
    
    
/* Applying variables to create the Dark Mode theme --------------------------------*/

#main-window:not([lwtheme]) {
    
    /* main browser window background color */
    background-color: var(--uc-ultima-window) !important;  
    & body {background: var(--uc-ultima-window) !important;}

    /* keep consistency with the navigation assets (including the tabs container) */
    & #navigator-toolbox {
        background-color: var(--toolbar-bgcolor) !important;
        border-bottom: 1px solid rgba(0,0,0,0) !important;
        &:-moz-window-inactive {
            background-color: var(--toolbar-bgcolor) !important;
            color: white !important;
        }
    }    
    
    /* content window */
    & #appcontent, 
    & #browser, 
    & #tabbrowser-tabbox, 
    & #tabbrowser-tabpanels, 
    & .browserSidebarContainer { 
        background: var(--toolbar-bgcolor) !important; 
    }
    & .browserStack { 
        background: var(--uc-transparent) !important; 
    }
    & #tabbrowser-tabpanels browser[type] {
        outline: 4px solid var(--toolbar-bgcolor);
    }

    /* side bar*/
    & #sidebar-header {
      background-color: var(--uc-sb-themed-ii) !important;
    }
    & #sidebar {
      background: var(--uc-sb-themed) !important;
    }
    & #sidebar-box {
      background-color: var(--uc-transparent) !important;
      box-shadow: 0.1rem 0.3rem 0.4rem -0.1rem rgba(25,25,25,0.8);
    }
    & #sidebar-search-container #search-box, & #sidebar-search-container #viewButton {
      appearance: none !important;
      border-radius: 10px !important;
      background-color: var(--uc-ultima-accent-iv) !important;
      box-shadow: 0.1rem 0.3rem 0.4rem -0.1rem rgba(25,25,25,0.8);
    }
    & #bookmarksPanel #sidebar-search-container #search-box {
      appearance: none !important;
      border-radius: 10px !important;
      background-color: var(--uc-ultima-accent-iv) !important;
    }
       
    /* tabs container */
    & #tabbrowser-tabs {
        background: transparent;
        --tab-loading-fill: var(--uc-ultima-accent-i) !important;
    }
    & #TabsToolbar-customization-target {
        box-shadow: 0.15rem 0.3rem 0.4rem -0.1rem rgba(25,25,25,0.8);
        background: var(--uc-ultima-background-iv);
    }
    /* pinned tabs style */
    & .tabbrowser-tab[pinned=""] .tab-background,
    & .tabbrowser-tab[pinned="true"] .tab-background {
      background-color: var(--tab-selected-bgcolor) !important;
      box-shadow: inset 0 0 1px 1px #94f3ff !important;
    }
    /* tabs tooltip styling */
    & .tab-preview-container {
      background-color: var(--uc-context-menu) !important;
      color: var(--uc-light-dark) !important;
      width: 225px !important;
      border: 1px solid var(--uc-text) !important;
    }

    /* URL bar */
    & #urlbar:is([focused="true"], & [open]) > #urlbar-background, & #searchbar:focus-within {
      background-color: var(--uc-ultima-accent-iv) !important;
      border-radius: var(--uc-all-border-radius) !important;
    }

    & #urlbar:is([focused="true"], & [open]) > #urlbar-background, & #searchbar:focus-within {
      border-radius: var(--uc-all-border-radius) !important;
    }

    & #urlbar-background, & #searchbar {
      background-color: var(--uc-ultima-accent-iv) !important;
      border-radius: 10px !important;
      border: 0 !important;
      box-shadow: 0.1rem 0.4rem 0.4rem -0.1rem rgba(25,25,25,0.8);
    }

    & #urlbar[open] > #urlbar-background {
      border-color: var(--uc-ultima-accent-iii) !important;
    }

    & #urlbar[breakout][breakout-extend] {
      background-color: var(--uc-context-menu) !important;
      border-radius: 10px;
    }

    & #urlbar-zoom-button {
      background-color: var(--uc-active) !important;
      margin-top:3px !important;
    }

    & .urlbarView-row {
        &[selected] {
            color: var(--uc-light-dark) !important;
        }
    }
                
    /* toolbar buttons */
    & .toolbarbutton-icon:hover,
    & .toolbarbutton-icon[open] {
        background-color: var(--uc-selected) !important;
    }        
    & #TabsToolbar #firefox-view-button:hover:not([open]) > .toolbarbutton-icon
      {background-color: var(--uc-selected) !important;}
    /* bookmark button in URL bar */
    & #star-button[starred] {
      fill-opacity: 1 !important;
      fill: var(--uc-ultima-accent-i) !important;
    }
    /* title bar buttons - min, max, close */
    & .titlebar-button {
      border-radius: var(--uc-button-border-radius);
    }
    & .titlebar-button:hover {
      background-color: var(--uc-selected) !important;
    }
    @media (-moz-platform: windows) {
        .titlebar-close:hover {
            background-color: rgb(191, 66, 66) !important;
        }
    }        

    /* other panels & extensions panel */
    & .panel-subview-body {
        background: var(--uc-ultima-background-ii) !important;
    }
    & panelview,
    & #unified-extensions-view {
        background: var(--uc-ultima-background-ii) !important;
    }
    
    /* drop down menus */
    & #ContentSelectDropdown > menupopup[customoptionstyling="true"]::part(arrowscrollbox) {
        --panel-color: black !important;
    }

    & #ContentSelectDropdownPopup .menupopup-arrowscrollbox::part(content) {
        --panel-color: black !important;
    }
    & #ContentSelectDropdownPopup menupopup,
    & #ContentSelectDropdownPopup panel {
        --panel-color: black !important;
    }        
        
    /* extra styling - bookmark toolbar adjustment */
    & #PersonalToolbar {background: var(--uc-transparent) !important;}
        
    /* extra styling - customize toolbar page */     
    & #customization-container {background-color: var(--uc-sb-background) !important;}    
    
    /* menu popups */
    & .panel-subview-body {
        background: var(--uc-ultima-background-iii) !important;
    }
    & .menupopup-arrowscrollbox {
        background-color: var(--uc-ultima-background-ii) !important;
    }
    
} /* < end of Dark Mode Theme */
    
    
    
    
/* Adapting to add-on-theme styling ------------------------------------------------*/   

#main-window[lwtheme] {
    
    /* main browser window background color */
    background-color: var(--lwt-accent-color) !important; 
    & body {background: var(--lwt-accent-color) !important;}
    /*if (this) preference is applied, use (that) variable instead*/
    @media (-moz-bool-pref: "ultima.xstyle.lwtheme") {
        background-color: var(--arrowpanel-background) !important;
        & body {background: var(--arrowpanel-background) !important;}
    }   

    /* keep consistency with the navigation assets (including the tabs container) */
    & #navigator-toolbox {
        background-color: var(--toolbar-bgcolor) !important;
        border-bottom: 1px solid rgba(0,0,0,0) !important;
        &:-moz-window-inactive {
            background-color: var(--toolbar-bgcolor) !important;
            color: white !important;
        }
    }    
    & #nav-bar {background: initial !important;}
    
    /* content window */
    & #appcontent, 
    & #browser, 
    & #tabbrowser-tabbox, 
    & #tabbrowser-tabpanels, 
    & .browserSidebarContainer { 
        background: var(--uc-transparent) !important; 
    }
    & .browserStack { 
        background: var(--uc-transparent) !important; 
    }
    & #tabbrowser-tabpanels browser[type] {
        margin-top: 2px !important; /*new*/
        outline: 3px solid var(--lwt-accent-color);
        @media (-moz-bool-pref: "ultima.xstyle.lwtheme") {
            outline: 3px solid var(--arrowpanel-background);
        }
    }    
    
    /* side bar*/
    & #sidebar-header, & #sidebar {
        background-color: var(--uc-sb-lwt) !important;
    }
    & #sidebar-box {
        background-color: var(--uc-transparent) !important;
        box-shadow: 0.1rem 0.3rem 0.4rem -0.1rem rgba(25,25,25,0.4);
    }
    & #sidebar-search-container #search-box, & #sidebar-search-container #viewButton {
        appearance: none !important;
        border-radius: 10px !important;
        background-color: var(--uc-ultima-accent-iv) !important;
        box-shadow: 0.1rem 0.3rem 0.4rem -0.1rem rgba(25,25,25,0.8);
    }
    & #bookmarksPanel #sidebar-search-container #search-box {
        appearance: none !important;
        border-radius: 10px !important;
        background-color: var(--uc-ultima-accent-iv) !important;
    }
    & .sidebar-panel[lwt-sidebar] {
        background-color: var(--uc-transparent) !important;
    }

    /* tabs and tabs container */
    --tab-selected-bgcolor: var(--lwt-accent-color) !important;
    @media (-moz-bool-pref: "ultima.xstyle.lwtheme") {
        * {
        --uc-tabs-lwt: color-mix(in srgb, var(--uc-ultima-background-i) 30%, var(--arrowpanel-background) 70%);
        --tab-selected-bgcolor: var(--uc-ultima-background-i) !important;
        }
    }
    & :root:not([customizing]) #tabbrowser-tabs:-moz-lwtheme {
        background-color: var(--uc-tabs-lwt) !important;
    }
    & #TabsToolbar-customization-target {
        background: var(--uc-tabs-lwt) !important;
    }
    /* pinned tabs style */       
    & .tab-content[pinned=""] .tab-background,
    & .tab-content[pinned="true"] .tab-background { 
        background: var(--lwt-accent-color);
    }
    & .tabbrowser-tab[pending="true"] {
        opacity: 0.3 !important;
    }
    
    /* URL bar */
    & #urlbar:is([focused="true"], & [open]) > #urlbar-background, & #searchbar:focus-within {
        margin-top: 3px !important; /*new*/
        background-color: color-mix(in srgb, var(--uc-ultima-background-i) 10%, var(--lwt-accent-color) 90%) !important;
        border-radius: var(--uc-all-border-radius) !important;
    }

    & #urlbar:is([focused="true"], & [open]) > #urlbar-background, & #searchbar:focus-within {
        border-radius: var(--uc-all-border-radius) !important;
    }

    & #urlbar-background, & #searchbar {
        background-color: var(--uc-ultima-accent-iv) !important;
        border-radius: 10px !important;
        border: 0 !important;
        box-shadow: 0.1rem 0.4rem 0.4rem -0.1rem var(--lwt-accent-color);
    }

    & #urlbar[open] > #urlbar-background {
        border-color: var(--uc-ultima-accent-iii) !important;
    }

    & #urlbar[breakout][breakout-extend] {
        background-color: transparent !important;
        border-radius: 10px;
    }

    & #urlbar-zoom-button {
        background-color: var(--uc-active) !important;
        margin-top:3px !important;
    }

    & .urlbarView-row {
        &[selected] {
            color: var(--uc-light-dark) !important;
        }
    }

    /* extra styling - customize toolbar page */     
    & #customization-container {background-color: var(--uc-sb-background) !important;} 
        
} /* < end of Add-On Theme Styling */
    
    

    
/* Global styling - applies everywhere ---------------------------------------------*/

/* scroll bars */
* {scrollbar-width:auto !important; scrollbar-color:rgba(50, 50, 60, 0.0) rgba(5,5,5, 0.0) !important;}
#navigator-toolbox {scrollbar-width:auto !important; scrollbar-color:rgba(50, 50, 60, 0.3) rgba(5,5,5, 0.0) !important;}     
    
/* global dialog box */
:root[dialogroot] {
  --in-content-page-background: var(--uc-ultima-background-iii) !important;
  color: var(--uc-light)  !important;
}    
    
/* fix for inactive/unfocused window altering nav bar color */    
@media (-moz-platform: windows), (-moz-platform: linux) {
    --inactive-titlebar-opacity: 1 !important;
}    
        
/* tooltip, worth a try */    
tooltip {
    background-color: var(--uc-ultima-background-i) !important;
    color: var(--uc-light) !important;
    border-color: var(--uc-dark) !important;
}

/* side bar - font size, padding, borders, etc */
#sidebar-header {
  font-size: 1.333em;
  padding: 7px !important;
  border-bottom: 0px !important;
}
#sidebar-close { /*side bar close button*/
    opacity: 0.6 !important;
} 
/* bookmarks, history, splitter */
#sidebar-search-container #search-box {
    height: 3em;
}
splitter {@media (-moz-platform: windows) { & {
  border-width: 0 0px !important;
  border-style: solid !important;
  background-color: transparent !important;
} } }
@media not (-moz-platform: linux) { .sidebar-splitter {
  border: 0 solid !important;
  border-inline-end-width: 1px !important;
  border-color: transparent !important;
  min-width: 1px !important;
  width: 4px !important;
  background-color: transparent !important;
  margin-inline-start: -7px !important;
} }

/* title bar buttons - min max close*/
#main-window {
    &:not([lwtheme]) .titlebar-button {
        stroke: var(--uc-ultima-accent-iii) !important;
    } 
    &[lwtheme="true"] .titlebar-button {
        stroke: var(--toolbarbutton-icon-fill) !important;
    }
}

/* titlebar opacity safe guard, hopefully */
:root { @media (-moz-platform: windows) {
  --inactive-titlebar-opacity: 1 !important;
}}

/* full screen indicator label */
/*--the label that says ("website.com is now in full screen...")--*/
#fullscreen-warning { 
    &, *.pointerlockfswarning {
        opacity: 0 !important;
        border-radius: 20px !important;
    }
    & * {
        border-radius: var(--uc-all-border-radius) !important;
    }
} 

    

    
/* Global styling - Icons --------------==========----------------------------------*/

/*--extension menu--*/
#main-window:not([lwtheme]) #unified-extensions-button {
  list-style-image: url("icons/extensions.svg") !important;
  fill: var(--uc-ultima-accent-iii) !important;
}
#main-window[lwtheme="true"] #unified-extensions-button {
  list-style-image: url("icons/extensions.svg") !important;
  fill: var(--lwt-accent-color) !important;
}
/*--bookmarks folder icon--*/
.bookmark-item[container=true] {
  list-style-image: url("icons/bm.png") !important;
}
/*--ublock on--*/
#ublock0_raymondhill_net-BAP image{
  list-style-image: url("icons/ubon.png") !important;
}
/*--ublock off--*/
#ublock0_raymondhill_net-BAP[tooltiptext="uBlock Origin (off)"] image{
  list-style-image: url("icons/uboff.png") !important;
}
#forward-button image{
  list-style-image: url("chrome://global/skin/icons/arrow-right.svg") !important;
  stroke: var(--uc-ultima-accent-iii) !important;
}
#back-button image{
  list-style-image: url("chrome://global/skin/icons/arrow-left.svg") !important;
  stroke: var(--uc-ultima-accent-iii) !important;
}

/*--notification badges--*/
.toolbarbutton-badge {
  background-color: rgba(0,0,0,0.3) !important;
  box-shadow: 0 !important;
  color: var(--uc-light) !important;
  text-shadow: #FDFFFF 0.5px 0 15px!important;
}
