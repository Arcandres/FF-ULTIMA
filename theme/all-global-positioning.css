/*--------------------------Global positioning--------------------------*/

/*
Global variables start at line 30. Then further modifications for different parts of the browser.
Spreadsheet of what every ultima-variable does: https://github.com/soulhotel/FF-ULTIMA/wiki/Variable-Spreadsheet
*/

/* user preference setting for XS size tabs */
@media (-moz-bool-pref: "ultima.tabs.size.xs") { @media not (-moz-bool-pref: "ultima.tabs.size.s") { @media not (-moz-bool-pref: "ultima.tabs.size.l") {
.wrapper {
  @media (-moz-bool-pref: "sidebar.verticalTabs") {
    :host([expanded]) & {
      min-width: 50px !important;
    }
  }
}
}}}
/* user preference setting for S size tabs */
@media (-moz-bool-pref: "ultima.tabs.size.s") { @media not (-moz-bool-pref: "ultima.tabs.size.xs") { @media not (-moz-bool-pref: "ultima.tabs.size.l") {
    @media (-moz-bool-pref: "sidebar.verticalTabs") {
        #sidebar-main:has([expanded]) .wrapper {
              min-width: 170px !important;
        }
    }
}}}
/* user preference setting for L size tabs */
@media (-moz-bool-pref: "ultima.tabs.size.l") { @media not (-moz-bool-pref: "ultima.tabs.size.xs") { @media not (-moz-bool-pref: "ultima.tabs.size.s") {
    @media (-moz-bool-pref: "sidebar.verticalTabs") {
        #sidebar-main:has([expanded]) .wrapper {
              min-width: 280px !important;
        }
    }
}}}


/* Global variables for quick modifications ---------------------------*/

:root, body, * {
    --chrome-content-separator-color: transparent;
    --uc-collapsed-tabs-width: 41px;
    --uc-navbar-height: 40px;
    --uc-bookbar-height: 22px;

    /*rounded corners*/
    --uc-all-border-radius: 10px;
    --tab-border-radius: 10px;
    --uc-button-border: 4px;

    /* margins */
    --uc-content-margins: 3.5px 5px 5px 5px; 
    --uc-tab-margins-left: 3.5px 0 5px 0px;
    --uc-tab-margins-right: 3.5px 0px 5px 0;
        
    --uc-sb-margins: 3.5px 0px 5px 0px;
    --uc-sb-margins-right: 3.5px 2.5px 5px 2.5px;
    --uc-tab-padding: 2px;

    /*individual tabs*/
    --tab-min-height: 35px;
    --tab-min-width: initial !important; /*dont touch*/
    --tab-overflow-pinned-tabs-width: initial !important; /*dont touch*/
    --inline-tab-padding: 10px;
    --tab-block-margin: 2px;
}

:root[uidensity="compact"]:not([customizing],[chromehidden~="menubar"]) {
    --uc-navbar-height: 34px;
}

/* Side bar ----------------------------------------------------------*/

/* bigger sidebar, 50vw = 50% of the screen width */
/* great for view-tab-in-sidebar extensions */

#sidebar-box {
    max-width: 50vw !important;
    min-width: 40px !important;
    width: 18em;
} 
#sidebar-box {
    margin: var(--uc-sb-margins) !important;
}

/* default left side < */
#sidebar-box, #sidebar, #sidebar-header {
    border-radius: var(--uc-all-border-radius) !important;
}

#sidebar-splitter {
    background-color: transparent !important;
    border: transparent solid 0px !important;
    width: 2px !important;
}


#sidebar-header {
    border-top-left-radius: var(--uc-all-border-radius) !important;
    border-top-right-radius: var(--uc-all-border-radius) !important;
}
#sidebar {
    border-bottom-left-radius: var(--uc-all-border-radius) !important;
    border-bottom-right-radius: var(--uc-all-border-radius) !important;
}


/* TABS Side Bar */

#sidebar-main {
    border-radius: var(--uc-all-border-radius);
}

#sidebar-main:not([positionend="true"]) {
	margin: var(--uc-tab-margins-left) !important;
}
        
#sidebar-main[positionend="true"] {
	margin: var(--uc-tab-margins-right) !important;
}

#sidebar-main *, #sidebar-main .wrapper {
    border-inline-end: 0px solid red !important;
}


/* Browser Content -------------------------------------------------*/

#main-window:not([lwtheme]) {
    & #tabbrowser-tabpanels browser[type] {
        margin: var(--uc-content-margins) !important;
        border-radius: var(--uc-all-border-radius);
        outline: 4px solid var(--toolbar-bgcolor) !important;
    }          
}       

#main-window[lwtheme] {        
    & #tabbrowser-tabpanels browser[type] {
        margin: var(--uc-content-margins) !important;
        outline: 4px solid var(--lwt-accent-color);
        @media (-moz-bool-pref: "ultima.xstyle.lwtheme") {
            outline: 3px solid var(--arrowpanel-background);
        }
    }
}

#vertical-tabs-newtab-button {
    height:25px !important;
    border-radius:0px !important;
    background:red !important;
    margin-inline: 3px -5px !important;;
}

/* Titlebar --------------------------------------------------------*/

.titlebar-spacer {width:5px !important;}

#tabbrowser-tabs {border-inline-start: 0px !important;}

#TabsToolbar {
    margin: 2px 2px 0 0 !important;
}

/* Nav Bar ---------------------------------------------------------*/

#nav-bar .toolbarbutton-1 {
    margin-top:4.5px !important;
}


/* Menu Bar --------------------------------------------------------*/

#toolbar-menubar {
    max-height:30px !important;
    margin-left:8px !important;
}

#main-menubar menu {
   border-radius: 10px !important; 
}

#menubar-items {
  background: var(--uc-ultima-window) !important;
  border-radius: 10px !important;
  justify-content: center !important;
  color: var(--uc-text) !important;
}

#toolbar-menubar:not([inactive="true"]) #main-menubar > menu { &[_moz-menuactive] {
  background-color: var(--uc-selected) !important;
  color: var(--uc-text) !important;
  border-radius: 5px !important;
}}

menubar > menu[open] {
    border-bottom: 1px var(--uc-accent-ii) solid !important;
}

/* Vertical Tabs settings ------------------------------------------*/

/* Keep titlebar ---------------------------------------------------*/

@media (-moz-bool-pref: "sidebar.verticalTabs") {

    /*toolbar spacing correction*/
    #nav-bar {
        min-height:var(--uc-navbar-height) !important;
    }
    
    /*default titlebar on or off*/
    @media not (-moz-bool-pref: "ultima.keep.titlebar") {
        #TabsToolbar, #TabsToolbar-customization-target {
            display:none;
        }
    }
    
    
}


#sidebar-main:has([expanded]) .tab-label-container {
  margin-left: 10px !important;
}



    
    
/* Keep titlebar ---------------------------------------------------*/
/*Autohide implementation ------------------------------------------*/

/*not using animation yet, feature is still being analyzed,
visual stutters arent fixed by animation,
most likely need to transform the new sidebar into a fixed element,
still should be way easier than the original verttab hack*/

@media (-moz-bool-pref: "ultima.tabs.autohide") {
    #sidebar-main:has([expanded]):not(:hover) {
        width:2.5px;
    }
}
/*
#sidebar-main:has([expanded]):not(:hover) {

    & :not(:hover) {
        position:absolute; 
        top: 0;
        left:-278px;
        height:100vh;
        z-index:999;
    }

}
*/
